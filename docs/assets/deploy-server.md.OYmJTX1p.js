import{_ as e}from"./chunks/render_new.-PWVLIBt.js";import{_ as s,o as r,c as o,R as t}from"./chunks/framework.LBXiIpgL.js";const n="/assets/new_webservice.k_qlqJAh.png",a="/assets/public_git_repo.4syDWTRR.png",l="/assets/service_config.2p9Q3AFb.png",i="/assets/db_connections.RnVEHxD1.png",y=JSON.parse('{"title":"Déployer le serveur","description":"","frontmatter":{},"headers":[],"relativePath":"deploy-server.md","filePath":"deploy-server.md"}'),p={name:"deploy-server.md"},u=t('<h1 id="deployer-le-serveur" tabindex="-1">Déployer le serveur <a class="header-anchor" href="#deployer-le-serveur" aria-label="Permalink to &quot;Déployer le serveur&quot;">​</a></h1><p>Cliquez sur le bouton &quot;New +&quot; sélectionnez &quot;Web Service&quot;.</p><p><img src="'+e+'" alt="New PostgreSQL"></p><p>Sélectionnez &quot;Build and deploy from a Git repository&quot; et cliquez sur &quot;Next&quot;.</p><p><img src="'+n+'" alt="New PostgreSQL"></p><p>Dans la section &quot;Public Git repository&quot;, entrez l&#39;url du repo Github du serveur <a href="https://github.com/ititp/commun-iti-server" target="_blank" rel="noreferrer">https://github.com/ititp/commun-iti-server</a> puis cliquez sur &quot;Continue&quot;.</p><p><img src="'+a+'" alt="Public Git Repo"></p><p>Dans le grand formulaire :</p><ul><li>Name : mettez commun-iti-server préfixé de votre nom</li><li>Region : Frankfurt</li><li>Branch : main</li><li>Build Command: npm install</li><li>Start Command: npm start</li></ul><p><img src="'+l+`" alt="Service Config"></p><p>Dans &quot;Instance Type&quot; sélectionnez &quot;Free&quot;.</p><p>Dans la section environnement variable, rajouter les variables :</p><ul><li>DB_NAME : <code>commun_iti_server_db</code></li><li>DB_URL : L&#39;URL de la base de données (voir <a href="#recuperer-l-url-de-la-base-de-donnees">plus bas</a>)</li><li>FILES_BASE_URL : <a href="https://monnom-commun-iti-server.onrender.com/file" target="_blank" rel="noreferrer">https://monnom-commun-iti-server.onrender.com/file</a> où &quot;monnom-commun-iti-server&quot; correspond au nom du projet.</li></ul><p>Cliquez enfin sur &quot;Create Web Service&quot;.</p><p>Le déploiement prend quelques minutes. A la fin, vous devriez voir marqué dans les logs</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">-- Server successfully started</span></span>
<span class="line"><span style="color:#e1e4e8;">-- Listening on XXXXX</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">-- Server successfully started</span></span>
<span class="line"><span style="color:#24292e;">-- Listening on XXXXX</span></span></code></pre></div><h2 id="recuperer-l-url-de-la-base-de-donnees" tabindex="-1">Récupérer l&#39;URL de la base de données <a class="header-anchor" href="#recuperer-l-url-de-la-base-de-donnees" aria-label="Permalink to &quot;Récupérer l&#39;URL de la base de données&quot;">​</a></h2><p>Dans le menu en haut, cliquez sur l&#39;onglet &quot;Dashboard&quot;.</p><p>Dans la liste des services, vous devriez voir votre base de données PostgreSQL. Cliquez sur votre base de données.</p><p>Scrollez ensuite jusqu&#39;à la section &quot;Connections&quot; et copiez l&#39;URL dans le chams &quot;Internal Database URL&quot;</p><p><img src="`+i+'" alt="DB Connections"></p>',21),c=[u];function d(m,_,v,q,h,b){return r(),o("div",null,c)}const S=s(p,[["render",d]]);export{y as __pageData,S as default};
